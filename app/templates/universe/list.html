{# app/templates/universe/list.html #}
{% extends "base.html" %}

{% block title %}
Universe
{% endblock %}

{% block content %}
<h2>Universe</h2>

<p>
    <a href="/universe/new" class="btn btn-primary btn-sm">Add new stock</a>
</p>

{% if rows and rows|length > 0 %}
<table class="table table-striped table-sm">
    <thead>
    <tr>
        <th>ID</th>
        <th>Exchange</th>
        <th>Symbol</th>
        <th>yfinance ticker</th>
        <th>BSE code</th>
        <th>BSE ticker</th>
        <th>ISIN</th>
        <th>Active</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    {% for r in rows %}
    <tr>
        <td>{{ r.id }}</td>
        <td>{{ r.exchange_code }}</td>
        <td>{{ r.symbol }}</td>
        <td>{{ r.yfinance_ticker or "-" }}</td>
        <td>{{ r.bse_code or "-" }}</td>
        <td>{{ r.bse_ticker or "-" }}</td>
        <td>{{ r.isin or "-" }}</td>
        <td>
            {% if r.is_active %}Yes{% else %}No{% endif %}
        </td>
        <td>
            <a href="/universe/{{ r.id }}/edit" class="btn btn-sm btn-secondary">
                Edit
            </a>
            <form
                action="/universe/{{ r.id }}/toggle"
                method="post"
                style="display:inline-block; margin-left:4px;"
            >
                <button type="submit" class="btn btn-sm btn-outline-primary">
                    {% if r.is_active %}Deactivate{% else %}Activate{% endif %}
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<p>No universe stocks defined yet.</p>
{% endif %}

{% endblock %}
