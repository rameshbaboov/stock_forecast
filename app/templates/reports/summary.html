{# app/templates/reports/summary.html #}
{% extends "base.html" %}

{% block title %}
Forecast Summary
{% endblock %}

{% block content %}
<h2>Forecast Summary</h2>

{% if not run %}
    <p>No forecast runs found.</p>
{% else %}
    <p>
        Latest run:
        <strong>{{ run.run_time }}</strong>
        {% if run.description %} ({{ run.description }}){% endif %}
        â€“ Status: <strong>{{ run.status }}</strong>
    </p>
    {% if run.error_message %}
        <p><strong>Error:</strong> {{ run.error_message }}</p>
    {% endif %}

    {% if rows and rows|length > 0 %}
        <table class="table table-striped table-sm">
            <thead>
            <tr>
                <th>Exchange</th>
                <th>Trend</th>
                <th>Count</th>
            </tr>
            </thead>
            <tbody>
            {% for r in rows %}
            <tr>
                <td>{{ r.exchange_name }} ({{ r.exchange_code }})</td>
                <td>{{ r.trend_flag }}</td>
                <td>{{ r.cnt }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No forecast data for this run.</p>
    {% endif %}
{% endif %}

<p class="mt-3">
    <a href="/forecast/latest">Latest forecasts</a> |
    <a href="/forecast/run">Run new forecast</a>
</p>
{% endblock %}
