{# app/templates/forecast/detail.html #}
{% extends "base.html" %}

{% block title %}
Forecast Detail - {{ item.symbol }} ({{ item.exchange_code }})
{% endblock %}

{% block content %}
<h2>Forecast Detail</h2>

{% if run %}
<p>
    Forecast run at
    <strong>{{ run.run_time }}</strong>
    {% if run.description %} ({{ run.description }}){% endif %}
</p>
{% endif %}

<div class="card">
    <h3>{{ item.symbol }} ({{ item.exchange_code }})</h3>
    <table class="table table-striped table-sm">
        <tbody>
        <tr>
            <th scope="row">As of date</th>
            <td>{{ item.as_of_date }}</td>
        </tr>
        <tr>
            <th scope="row">Forecast date</th>
            <td>{{ item.next_date }}</td>
        </tr>
        <tr>
            <th scope="row">Last close</th>
            <td>{{ "%.2f"|format(item.last_close) }}</td>
        </tr>
        <tr>
            <th scope="row">Forecast return</th>
            <td>{{ "%.4f"|format(item.forecast_return) }}</td>
        </tr>
        <tr>
            <th scope="row">Forecast price</th>
            <td>{{ "%.2f"|format(item.forecast_price) }}</td>
        </tr>
        <tr>
            <th scope="row">Lower price</th>
            <td>{{ "%.2f"|format(item.lower_price) if item.lower_price is not none else "-" }}</td>
        </tr>
        <tr>
            <th scope="row">Upper price</th>
            <td>{{ "%.2f"|format(item.upper_price) if item.upper_price is not none else "-" }}</td>
        </tr>
        <tr>
            <th scope="row">Trend</th>
            <td>{{ item.trend_flag }}</td>
        </tr>
        </tbody>
    </table>
</div>

<p class="mt-3">
    <a href="/forecast/latest">&laquo; Back to latest forecasts</a>
</p>
{% endblock %}
